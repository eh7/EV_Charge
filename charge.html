<!doctype>
<html>
<head>
<meta charset="utf-8"/>
<script type="text/javascript" src="web3.min.js"></script>
</head>

<body onload="run()">

<div id="out">&nbsp;</div>

<script type="text/javascript">
function run() {

  document.getElementById("out").innerHTML = "<h1>output div</h1>";

  var Web3 = require('web3');
  var web3 = new Web3();
  web3.setProvider(new web3.providers.HttpProvider("http://127.0.0.1:9545"))

  var addr = '0x2c2b9c9a4a25e24b174f26114e8926a9f2128fe4';

  var abi = [ { constant: true, inputs: [], name: 'count', outputs: [ [Object] ], payable: false, stateMutability: 'view', type: 'function' }, { constant: true, inputs: [], name: 'owner', outputs: [ [Object] ], payable: false, stateMutability: 'view', type: 'function' }, { inputs: [], payable: false, stateMutability: 'nonpayable', type: 'constructor' }, { anonymous: false, inputs: [ [Object], [Object], [Object], [Object] ], name: 'AddedChargeRecord', type: 'event' }, { constant: false, inputs: [], name: 'kill', outputs: [], payable: false, stateMutability: 'nonpayable', type: 'function' }, { constant: false, inputs: [ [Object] ], name: 'add_charge_record', outputs: [], payable: false, stateMutability: 'nonpayable', type: 'function' }, { constant: true, inputs: [ [Object] ], name: 'get_timestamp', outputs: [ [Object] ], payable: false, stateMutability: 'view', type: 'function' }, { constant: true, inputs: [ [Object] ], name: 'get_duration', outputs: [ [Object] ], payable: false, stateMutability: 'view', type: 'function' }, { constant: true, inputs: [ [Object] ], name: 'get_user_address', outputs: [ [Object] ], payable: false, stateMutability: 'view', type: 'function' } ]; 

   console.log(addr)
   console.log(abi)

/* 
  web3 v 1.0.0. 
   var ChargeContract = new web3.eth.Contract(abi);
*/
   var ChargeContract = web3.eth.contract(abi);
   var Charge = ChargeContract.at(addr);
   var events    =       Charge.allEvents({fromBlock: 0, toBlock: 'latest'});
console.log(events);
/*
   var allEvents = thisInstance.allEvents({fromBlock: 0, toBlock: 'latest'});
   events.get(function(error, logs){ 
     for(i=0;i<logs.length;i++) {
       console.log(logs[i]); 
//       document.getElementById("out").innerHTML = logs[i];
     }
   });
*/
//   console.log(ChargeContract);
}
</script>
</body>
</html>
